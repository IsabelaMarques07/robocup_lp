import javax.swing.JButton;
import javax.swing.JOptionPane;
import java.util.Random;
import javax.swing.UIManager;
import javax.swing.plaf.ColorUIResource;

import java.awt.*;

import java.util.Scanner;

public class ProgramaSalasv2 
{
	static String sala =""; //vai receber as salas
	static StringBuffer strSalas = new StringBuffer(); //vai reunir todas as salas
	static int tamanhoMaior= 0;
	static int tamanho =0;
	static int qtListas=0;
	static int r, s; //variaveis de respostas

	public static void main(String[] args) 
	{
		
		Scanner teclado = new Scanner(System.in);
		TelaInicial();
		teclado.close();
	}
	
	public static void TelaInicial() {
		//TELA PRINCIPAL
		
		UIManager.put("OptionPane.minimumSize", new Dimension(500, 50));//tamanho minimo da tela
		UIManager.put("OptionPane.background", new ColorUIResource(Color.RED));//cor de fundo
		UIManager.put("OptionPane.buttonOrientation", JButton.RIGHT);//disposicao dos botoes
		UIManager.put("OptionPane.messageForeground", Color.BLUE);//cor do texto
		UIManager.put("OptionPane.buttonPadding", 5);
				do {
					Object opcoes[] = { "Criar lista", 
										"Ter relação de salas", 
										"Excluir uma lista", 
										"Sair"};
					
					r = JOptionPane.showOptionDialog(null, 
													"O que deseja fazer agora?", 
													"Escolha!", 
													JOptionPane.YES_NO_OPTION, 
													JOptionPane.QUESTION_MESSAGE, 
													null, 
													opcoes, 
													opcoes[0]);
					

					if(r == 0) {
						EscolherAndar();
					}
					
					if(r == 1)
					{
						CriarListaUnica();
					}
					
					if(r == 2) 
					{
						ExcluirLista();
					}
				}while(r != 3);
	}
	
	public static void EscolherAndar() {
		Object opcoes[] = { "Primeiro Andar", 
				"Segundo Andar", 
				"Terceiro Andar"
				};
		
		s = JOptionPane.showOptionDialog(null, 
				"Escolha um andar abaixo", 
				"Escolha!", 
				JOptionPane.YES_NO_OPTION, JOptionPane.QUESTION_MESSAGE, 
				null, 
				opcoes, 
				opcoes[0]);
		
		AdicionarLista(s);
	}
	
	public static void AdicionarLista(int andar) {
		
		//SALAS DE CADA ANDAR
		Object opcoesP[] = { "1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33", "Cancelar", "Andares", "Salvar"};
		Object opcoesS[] = { "34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66", "Cancelar", "Andares", "Salvar"};
		Object opcoesT[] = { "67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99", "Cancelar", "Andares", "Salvar"};
		
		int salaEscolhida = 0;
		switch(andar) {
		case 0:
			do {
				
				r = JOptionPane.showOptionDialog(null, 
						"Escolha a sala", 
						"SALAS DO PRIMEIRO ANDAR", 
						JOptionPane.YES_NO_OPTION, JOptionPane.QUESTION_MESSAGE, 
						null, 
						opcoesP, 
						opcoesP[0]);
				
				if(r != 33 && r != 34 && r != 35) {
					salaEscolhida = r + 1;
					sala= sala + salaEscolhida+" ";
					tamanho++;
				}
				
			}while(r != 33 && r != 34 && r != 35);
			break;
			
		case 1:
			do{
				
				r = JOptionPane.showOptionDialog(null, 
						"Escolha a sala", 
						"SALAS DO SEGUNDO ANDAR", 
						JOptionPane.YES_NO_OPTION, JOptionPane.QUESTION_MESSAGE, 
						null, 
						opcoesS, 
						opcoesS[0]);
				
				if(r != 33 && r != 34 && r != 35) {
					salaEscolhida = r + 34;
					sala= sala + salaEscolhida+" ";
					tamanho++;
				}
			}while(r != 33 && r != 34 && r != 35);

			break;
			
		case 2:
			do{
				
				r = JOptionPane.showOptionDialog(null, 
						"Escolha a sala", 
						"SALAS DO TERCEIRO ANDAR",
						JOptionPane.YES_NO_OPTION, JOptionPane.QUESTION_MESSAGE, 
						null, 
						opcoesT, 
						opcoesT[0]);
				
				if(r != 33 && r != 34 && r != 35) {
					salaEscolhida = r + 67;
					sala= sala + salaEscolhida+" ";
					tamanho++;
				}
			}while(r != 33 && r != 34 && r != 35);
			break;
		}
		
		if(r == 33) {//CANCELAR
			sala = "";
			tamanho = 0;
			TelaInicial();
		}
		
		if(r == 34) { //ESCOLHER MAIS UM ANDAR
			EscolherAndar();
		}

		if(r == 35) { //SALVAR LISTA
			if(tamanho < 5) {
				JOptionPane.showMessageDialog(null, "Adicione mais "+(5-tamanho)+" salas, no mínimo, para completar a lista!");
				EscolherAndar();
			}
			SalvarLista(sala);
		}
		
		JOptionPane.showMessageDialog(null, sala);
		
	}
	
	public static void SalvarLista(String lista) {
		strSalas.append(lista+"; ");
		JOptionPane.showMessageDialog(null, "Listas salvas: "+ strSalas);
		sala = "";
		
		if(tamanho > tamanhoMaior)
			tamanhoMaior = tamanho;
		tamanho = 0;
		qtListas++;
		TelaInicial();
		//Transformar aquela linha em um vetor e excluir os números iguais

	}
	
	public static void CriarListaUnica() {
		if(qtListas < 3) {
			JOptionPane.showMessageDialog(null, "Você precisa inserir pelo menos três listas para efetuar essa ação!");
		}
		else {
			
			//TEMPO
			//vetor que guarda os minutos de cada sala
			int tempoSalas[] = new int[98];
			int tempoTotal=0;
			
			//Preencher aleatóriamente com números de 5 a 15
			Random r = new Random();
			for(int i = 0; i < tempoSalas.length; i++)
			{
				tempoSalas[i] = r.nextInt(11)+5;
			}
			
			//mostrar tempo das sala
			for(int i=0; i< tempoSalas.length; i++)
				System.out.print(" - "+tempoSalas[i]);
			
			//SALAS
			//strSalas é a StringBuffer com todas as listas
			//Separar a strSalas em um vetor das listas --> vetListas
			
			//Transformar StringBuffer em String
			String Salas = strSalas.toString();
			
			//Separar a String Salas
			String vetListas[] = Salas.split("; ");
			
			//Separar cada linha da vetListas em uma linha para separar cada sala --> vetSalas
			String vetSalas[][] = new String[qtListas][tamanhoMaior];
			
			//Número total de salas
			int totalSalas=0;	
			
			//Criar String temporária para armazenar determinada linha do vetor para a inserir no vetor final
			for(int l = 0; l < qtListas; l++) {
				String strTemp[] = vetListas[l].split(" ");
				
				for(int i=0; i< strTemp.length; i++) {
					vetSalas[l][i] = strTemp[i];
					totalSalas++;
				}
				
			}

			//Criar vetor único com quantidade total de salas
			int uniaoSalas[] = new int [totalSalas];
			
			int p=0; //posicao no vetor uniao
			int sala; //Número da sala como variável inteira
			int j;
			boolean uniao= true;
			
			//Inserir os números no vetor uniao seguindo por coluna
			for(int f=0; f < tamanhoMaior; f++) {
				for(int g = 0; g < qtListas; g++) {
					if(vetSalas[g][f] != null) {
						sala = Integer.valueOf(vetSalas[g][f]);
						
						j = 0;
						while((j<p) && (sala != uniaoSalas[j]))
							j++;
						
						if(j>= p) {
							uniaoSalas[p++] = sala;
							tempoTotal = tempoTotal + tempoSalas[sala-1];

						}

						
					}
				}
			}
			
			StringBuffer strUniao = new StringBuffer();
			//apresentar uniao
			for(int i=0; i < uniaoSalas.length;i++) {
				if(uniaoSalas[i]!= 0)
					strUniao.append(uniaoSalas[i]+ " ");
			}
			

			//Apresentação do tempo
			int horas, minutos;
			
			horas = tempoTotal/60;
			minutos = tempoTotal % 60;
			
			System.out.println("Tempo total"+tempoTotal);
			System.out.println("horas"+horas);
			System.out.println("minutos"+minutos);
			
			
			JOptionPane.showMessageDialog(null, "Salas que precisam ser desinfetadas: "+strUniao);
			JOptionPane.showMessageDialog(null, "Demorará "+horas+" horas: "+minutos+" minutos");
			TelaInicial();
		}
	}


	public static void ExcluirLista() {
		JOptionPane.showMessageDialog(null, "EXCLUINDO...");
	}
}
